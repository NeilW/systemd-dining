#!/bin/sh
set -e


seat_area=/home/share/dining-room/seats
for seat in $(find "${seat_area}" -type f -writable)
do
	index=$(basename "$seat")
	total=$(ls "${seat_area}" | wc -l)
	next_index=$((index + 1))
	prev_index=$((index - 1))
	if [ "${prev_index}" -eq 0 ]
	then
		prev_index=${total}
	fi
	if [ "${next_index}" -gt "${total}" ]
	then
		next_index=1
	fi
	stat -c%U "${seat_area}/${prev_index}" "${seat_area}/${next_index}"
done
